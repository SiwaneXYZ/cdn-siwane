function isDomainMatched(decodedDomain){const currentDomain=window.location.hostname.replace(/^www\./,'');return currentDomain===decodedDomain.replace(/^www\./,'');}function checkDomainMatch(){try{const decryptedDomainBase64=atob(keylicenc);const decryptedDomainAES=aesDecrypt(decryptedDomainBase64,'Rawan05@*#$');if(!isDomainMatched(decryptedDomainAES)){showErrorNotification('النطاق غير مسموح به. يرجى التحقق من الإعدادات.','https://wa.me/212722464243');return false;} }catch(error){showErrorNotification('حدث خطأ أثناء التحقق من رمز التفعيل.','https://wa.me/212722464243');console.error('تفاصيل الخطأ:',error);return false;}return true;}function aesDecrypt(encrypted,key){const bytes=CryptoJS.AES.decrypt(encrypted,key);return bytes.toString(CryptoJS.enc.Utf8);}function showErrorNotification(message,supportLink){const overlay=document.createElement('div');overlay.className='overlay';const notification=document.createElement('div');notification.className='notification-error';notification.innerHTML=`${message}<a class="support-link" href="${supportLink}" target="_blank">الاتصال بالدعم</a>`;document.body.appendChild(overlay);document.body.appendChild(notification);}if(checkDomainMatch()){const encryptButton=document.getElementById('encryptButton');const urlInput=document.getElementById('urlInput');const encodedUrlContainer=document.getElementById('encodedUrlContainer');const encodedUrlInput=document.getElementById('encodedUrl');const copyButton=document.getElementById('copyButton');const goButton=document.getElementById('goButton');const clearButton=document.getElementById('clearButton');encryptButton.addEventListener('click',function(){if(urlInput.value.trim()===""){showErrorNotification("يرجى إدخال رابط.","");return;}try{const encodedUrl=btoa(urlInput.value);encodedUrlInput.value=window.location.origin+'/p/'+scriptConfig.demoPage+'?url='+encodedUrl;encodedUrlContainer.style.display='block';copyButton.style.display='inline-block';goButton.style.display='inline-block';clearButton.style.display='inline-block';}catch(error){console.error('خطأ أثناء تشفير الرابط:',error);showErrorNotification('حدث خطأ أثناء تشفير الرابط.','');}});copyButton.addEventListener('click',function(){encodedUrlInput.select();document.execCommand('copy');alert("تم نسخ الرابط المشفر!");});goButton.addEventListener('click',function(){const encodedUrl=btoa(urlInput.value);window.location.href='/p/'+scriptConfig.demoPage+'?url='+encodedUrl;});clearButton.addEventListener('click',function(){urlInput.value='';encodedUrlInput.value='';encodedUrlContainer.style.display='none';copyButton.style.display='none';goButton.style.display='none';clearButton.style.display='none';});}const style=`.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.7);z-index:999;backdrop-filter:blur(5px);}.notification-error{background-color:#f8d7da;color:#721c24;padding:20px;text-align:center;border-radius:10px;box-shadow:0 0 15px rgba(0,0,0,0.2);font-weight:bold;font-size:18px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);animation:slideIn 0.5s ease-in-out;z-index:1000;width:80%;max-width:500px;}.support-link{display:block;margin-top:15px;padding:10px;background-color:#25d366;color:white;text-decoration:none;font-weight:bold;border-radius:5px;text-align:center;}.support-link:hover{background-color:#128c7e;}@keyframes slideIn{from{transform:translate(-50%,-60%);opacity:0;}to{transform:translate(-50%,-50%);opacity:1;}}`;const styleSheet=document.createElement("style");styleSheet.type="text/css";styleSheet.innerText=style;document.head.appendChild(styleSheet);
